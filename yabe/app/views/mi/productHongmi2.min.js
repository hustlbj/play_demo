XIAOMI.namespace("products"),XIAOMI.products=function(){function a(b,c){return c=c>b.length?b.length:c,0>c?0:a(b,c-1)+b[c]}function b(a){return"number"==typeof a&&isFinite(a)&&a%1===0}function c(b,d){function e(){var a=-1;return $(m).each(function(b){return n+j-m[b]>0?void(a+=1):!1}),0>a?!1:void(i.eq(a).hasClass("xm-visible-section")||(g.onlyOneVisible&&i.removeClass("xm-visible-section"),i.eq(a).addClass("xm-visible-section"),"function"==typeof g.onVisible&&g.onVisible(a)))}var f,g,h,i,j,k=$(b),l=[],m=[],n=0;if(0===k.length)return b;if(k.length>1)return k.each(function(){c($(this),d)}),k;f={selector:".section",viewport:$(window),sectionOffsetFix:300,onlyOneVisible:!1,onLoad:function(){},onVisible:function(){}},g=$.extend({},f,d),i=k.children(g.selector),h=k.addClass("xm-visible-section-container").offset().top,n=$(document).scrollTop()-h,j=g.viewport.height(),i.each(function(){l.push($(this).height())});for(var o=0;o<l.length;o+=1){var p=i.eq(o).attr("data-offset-fix")?parseInt(i.eq(o).attr("data-offset-fix")):g.sectionOffsetFix;m[o]=a(l,o-1)+p}"function"==typeof g.onLoad&&g.onLoad(),$(window).on({"resize.visible":function(){j=$(window).height(),e()},"scroll.visible":function(){n=$(document).scrollTop()-h,e()}}),$(document).ready(function(){e()})}function d(a,c){function e(a,c){return b(a)?a:a.toFixed(c)}function f(){if(1e3*l/h.time>100){var a=Math.floor(l/50);k*=a,l/=a,f()}}var g,h,i,j,k,l,m,n=$(a);return 0===n.length?a:n.length>1?(n.each(function(){d($(this),c)}),n):(g={stepBase:1,startNum:0,fixed:1,time:1e3},h=$.extend({},g,c),j=Number(n.attr("data-end-number"))||Number(n.text()),j&&0!==j?(i=h.startNum,!b(j)&&b(h.stepBase)?(k=.1*h.stepBase,l=Math.ceil(j/k)):(k=1*h.stepBase,l=Math.ceil(j/k)),f(),n.text(i),void(m=window.setInterval(function(){i+=k,l-=1,n.text(e(i,h.fixed)),1>l&&(window.clearInterval(m),n.text(j))},h.time/l))):!1)}var e=function(){var a=document.createElement("p").style,b=["ms","O","Moz","Webkit"];if(""===a.transition)return!0;for(;b.length;)return b.pop()+"Transition"in a?!0:!1}();return{supportsTransitions:e,visibleWatcher:c,jumpNumber:d}}();